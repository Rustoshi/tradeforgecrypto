@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* HYI Broker Platform - Semantic Token System */
/* WCAG AA Compliant - No gradients, no AI-styled visuals */

@theme inline {
  /* Core Colors */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-surface: var(--surface);
  --color-surface-muted: var(--surface-muted);
  
  /* Text Colors */
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);
  
  /* Border Colors */
  --color-border: var(--border);
  --color-border-default: var(--border-default);
  --color-border-strong: var(--border-strong);
  
  /* Primary Colors */
  --color-primary: var(--primary);
  --color-primary-hover: var(--primary-hover);
  --color-primary-muted: var(--primary-muted);
  --color-primary-foreground: var(--primary-foreground);
  
  /* Semantic Colors */
  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-error: var(--error);
  --color-info: var(--info);
  --color-destructive: var(--error);
  
  /* Chart Colors */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  
  /* Component Colors (shadcn compatibility) */
  --color-card: var(--surface);
  --color-card-foreground: var(--text-primary);
  --color-popover: var(--surface);
  --color-popover-foreground: var(--text-primary);
  --color-secondary: var(--surface-muted);
  --color-secondary-foreground: var(--text-primary);
  --color-muted: var(--surface-muted);
  --color-muted-foreground: var(--text-muted);
  --color-accent: var(--surface-muted);
  --color-accent-foreground: var(--text-primary);
  --color-input: var(--border-default);
  --color-ring: var(--primary);
  
  /* Sidebar Colors */
  --color-sidebar: var(--surface);
  --color-sidebar-foreground: var(--text-primary);
  --color-sidebar-primary: var(--primary);
  --color-sidebar-primary-foreground: var(--primary-foreground);
  --color-sidebar-accent: var(--surface-muted);
  --color-sidebar-accent-foreground: var(--text-primary);
  --color-sidebar-border: var(--border-default);
  --color-sidebar-ring: var(--primary);
  
  /* Typography */
  --font-sans: var(--font-inter);
  --font-heading: var(--font-manrope);
  --font-mono: var(--font-mono);
  
  /* Border Radius */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

/* ============================================ */
/* LIGHT MODE - Default Theme */
/* ============================================ */
:root {
  --radius: 0.375rem;
  
  /* Backgrounds */
  --background: #F9FAFB;
  --surface: #FFFFFF;
  --surface-muted: #F3F4F6;
  --foreground: #0F172A;
  
  /* Text */
  --text-primary: #0F172A;
  --text-secondary: #475569;
  --text-muted: #64748B;
  
  /* Borders */
  --border: #E5E7EB;
  --border-default: #E5E7EB;
  --border-strong: #CBD5E1;
  
  /* Primary */
  --primary: #2563EB;
  --primary-hover: #1D4ED8;
  --primary-muted: #DBEAFE;
  --primary-foreground: #FFFFFF;
  
  /* Semantic */
  --success: #16A34A;
  --warning: #D97706;
  --error: #DC2626;
  --info: #0284C7;
  
  /* Charts */
  --chart-1: #2563EB;
  --chart-2: #16A34A;
  --chart-3: #D97706;
  --chart-4: #DC2626;
}

/* ============================================ */
/* DARK MODE - Premium Layered Depth */
/* ============================================ */
.dark {
  /* Layered Backgrounds - Deep, luxurious darkness */
  --background: #09090b;
  --surface: #0c0c0f;
  --surface-muted: #141419;
  --surface-elevated: #1a1a21;
  --foreground: #fafafa;
  
  /* Text - Refined hierarchy */
  --text-primary: #fafafa;
  --text-secondary: #a1a1aa;
  --text-muted: #71717a;
  
  /* Borders - Subtle, refined */
  --border: rgba(255, 255, 255, 0.06);
  --border-default: rgba(255, 255, 255, 0.06);
  --border-strong: rgba(255, 255, 255, 0.12);
  
  /* Primary - Refined blue */
  --primary: #3b82f6;
  --primary-hover: #60a5fa;
  --primary-muted: rgba(59, 130, 246, 0.15);
  --primary-foreground: #ffffff;
  
  /* Semantic - Vibrant but refined */
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  --info: #06b6d4;
  
  /* Charts */
  --chart-1: #3b82f6;
  --chart-2: #10b981;
  --chart-3: #f59e0b;
  --chart-4: #ef4444;
}

/* ============================================ */
/* BASE STYLES */
/* ============================================ */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  
  body {
    @apply bg-background text-foreground antialiased;
  }
  
  /* Focus states for accessibility */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }
  
  /* Disabled states */
  [disabled] {
    @apply opacity-50 cursor-not-allowed;
  }
}

/* ============================================ */
/* COMPONENT UTILITIES */
/* ============================================ */
@layer utilities {
  /* Table zebra rows */
  .table-zebra tbody tr:nth-child(even) {
    @apply bg-surface-muted;
  }
  
  /* Sticky table headers */
  .table-sticky thead {
    @apply sticky top-0 z-10 bg-surface;
  }
  
  /* Font utilities */
  .font-heading {
    font-family: var(--font-manrope), system-ui, sans-serif;
  }
  
  /* Ken Burns slow zoom animation */
  .animate-slow-zoom {
    animation: slow-zoom 20s ease-in-out infinite alternate;
  }
  
  @keyframes slow-zoom {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(1.1);
    }
  }
}

/* GTranslate widget z-index */
.gtranslate_wrapper,
.gt_float_switcher,
.gt-current-lang {
  z-index: 9999 !important;
}

/* Safe area padding for iOS devices */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

.pt-safe {
  padding-top: env(safe-area-inset-top, 0px);
}

/* Dashboard card enhancements */
.dashboard-card {
  @apply relative overflow-hidden;
  background: linear-gradient(
    135deg,
    var(--surface) 0%,
    color-mix(in srgb, var(--surface) 95%, var(--primary) 5%) 100%
  );
}

.dark .dashboard-card {
  background: linear-gradient(
    135deg,
    var(--surface) 0%,
    color-mix(in srgb, var(--surface) 97%, var(--primary) 3%) 100%
  );
}

/* Glow effects for key values */
.glow-success {
  text-shadow: 0 0 20px color-mix(in srgb, var(--success) 30%, transparent);
}

.glow-primary {
  text-shadow: 0 0 20px color-mix(in srgb, var(--primary) 30%, transparent);
}

.dark .glow-success {
  text-shadow: 0 0 30px color-mix(in srgb, var(--success) 40%, transparent);
}

.dark .glow-primary {
  text-shadow: 0 0 30px color-mix(in srgb, var(--primary) 40%, transparent);
}

/* ============================================ */
/* PREMIUM FINTECH STYLING */
/* ============================================ */

/* Ambient background gradient */
.ambient-bg {
  position: relative;
}

.ambient-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(59, 130, 246, 0.08), transparent),
    radial-gradient(ellipse 60% 40% at 100% 50%, rgba(16, 185, 129, 0.05), transparent),
    radial-gradient(ellipse 60% 40% at 0% 80%, rgba(245, 158, 11, 0.03), transparent);
  pointer-events: none;
  z-index: 0;
}

/* Premium card surface */
.premium-surface {
  background: linear-gradient(
    135deg,
    var(--surface) 0%,
    var(--surface-muted) 100%
  );
  border: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow: 
    0 0 0 1px rgba(0, 0, 0, 0.1),
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 8px 16px rgba(0, 0, 0, 0.1);
}

.dark .premium-surface {
  box-shadow: 
    0 0 0 1px rgba(255, 255, 255, 0.03),
    0 2px 4px rgba(0, 0, 0, 0.2),
    0 8px 16px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

/* Fiat card - Cool, stable, glassy */
.fiat-card {
  background: linear-gradient(
    135deg,
    var(--surface) 0%,
    color-mix(in srgb, var(--surface) 95%, var(--primary) 5%) 100%
  );
  border: 1px solid rgba(59, 130, 246, 0.1);
}

.dark .fiat-card {
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.03) 0%,
    var(--surface) 50%,
    rgba(59, 130, 246, 0.02) 100%
  );
  border: 1px solid rgba(59, 130, 246, 0.15);
  box-shadow: 
    0 0 0 1px rgba(59, 130, 246, 0.05),
    0 4px 12px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(59, 130, 246, 0.1);
}

/* Bitcoin card - Warm, premium amber glow */
.btc-card {
  background: linear-gradient(
    135deg,
    var(--surface) 0%,
    color-mix(in srgb, var(--surface) 95%, var(--warning) 5%) 100%
  );
  border: 1px solid rgba(245, 158, 11, 0.1);
}

.dark .btc-card {
  background: linear-gradient(
    135deg,
    rgba(245, 158, 11, 0.04) 0%,
    var(--surface) 50%,
    rgba(245, 158, 11, 0.02) 100%
  );
  border: 1px solid rgba(245, 158, 11, 0.2);
  box-shadow: 
    0 0 0 1px rgba(245, 158, 11, 0.05),
    0 4px 12px rgba(0, 0, 0, 0.2),
    0 0 40px -10px rgba(245, 158, 11, 0.15),
    inset 0 1px 0 rgba(245, 158, 11, 0.1);
}

/* Profit card - Success glow */
.profit-card {
  background: linear-gradient(
    135deg,
    var(--surface) 0%,
    color-mix(in srgb, var(--surface) 95%, var(--success) 5%) 100%
  );
  border: 1px solid rgba(16, 185, 129, 0.1);
}

.dark .profit-card {
  background: linear-gradient(
    135deg,
    rgba(16, 185, 129, 0.03) 0%,
    var(--surface) 50%,
    rgba(16, 185, 129, 0.02) 100%
  );
  border: 1px solid rgba(16, 185, 129, 0.15);
  box-shadow: 
    0 0 0 1px rgba(16, 185, 129, 0.05),
    0 4px 12px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(16, 185, 129, 0.1);
}

/* Icon containers with depth */
.icon-container {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  transition: all 0.3s ease;
}

.icon-container-primary {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.05));
  box-shadow: 0 0 20px -5px rgba(59, 130, 246, 0.3);
}

.icon-container-warning {
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.05));
  box-shadow: 0 0 20px -5px rgba(245, 158, 11, 0.4);
}

.icon-container-success {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05));
  box-shadow: 0 0 20px -5px rgba(16, 185, 129, 0.3);
}

/* Premium button styling */
.btn-premium {
  position: relative;
  overflow: hidden;
  transition: all 0.2s ease;
}

.btn-premium::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.btn-premium:hover::before {
  opacity: 1;
}

.btn-premium:active {
  transform: scale(0.98);
}

/* Glow effects - Enhanced */
.glow-warning {
  text-shadow: 0 0 20px color-mix(in srgb, var(--warning) 35%, transparent);
}

.dark .glow-warning {
  text-shadow: 0 0 30px color-mix(in srgb, var(--warning) 50%, transparent);
}

/* Number styling - Financial precision */
.financial-number {
  font-feature-settings: 'tnum' 1, 'lnum' 1;
  letter-spacing: -0.02em;
}

/* Scrollbar styling */
.dark ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dark ::-webkit-scrollbar-track {
  background: transparent;
}

.dark ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* ============================================ */
/* PREMIUM VISUAL ENHANCEMENTS */
/* ============================================ */

/* Subtle noise texture overlay */
.noise-texture {
  position: relative;
}

.noise-texture::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.015;
  pointer-events: none;
  z-index: 1;
}

.dark .noise-texture::before {
  opacity: 0.03;
}

/* Glass morphism cards */
.glass-card {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.03) 0%,
    rgba(255, 255, 255, 0.01) 100%
  );
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow: 
    0 4px 24px -4px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

.glass-card:hover {
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 8px 32px -4px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

/* Section divider with gradient */
.section-divider {
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.06) 20%,
    rgba(255, 255, 255, 0.1) 50%,
    rgba(255, 255, 255, 0.06) 80%,
    transparent 100%
  );
}

/* Allocation bar styling */
.allocation-bar {
  height: 6px;
  border-radius: 3px;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.05);
}

.allocation-segment {
  height: 100%;
  transition: width 0.5s ease-out;
}

/* Tip card styling */
.tip-card {
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.08) 0%,
    rgba(59, 130, 246, 0.02) 100%
  );
  border: 1px solid rgba(59, 130, 246, 0.15);
}

.tip-card:hover {
  border-color: rgba(59, 130, 246, 0.25);
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.12) 0%,
    rgba(59, 130, 246, 0.04) 100%
  );
}

/* ============================================ */
/* PIN NUMPAD ANIMATIONS */
/* ============================================ */

/* Shake animation for PIN error */
.animate-shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

/* Fade in animation */
.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ============================================ */
/* SCROLLBAR UTILITIES */
/* ============================================ */
.scrollbar-none {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-none::-webkit-scrollbar {
  display: none;
}

/* ============================================ */
/* MOBILE RESPONSIVENESS FIXES */
/* ============================================ */
@media (max-width: 640px) {
  /* Prevent horizontal overflow on mobile */
  body {
    overflow-x: hidden;
  }
  
  /* Ensure inputs don't overflow */
  input, textarea, select {
    max-width: 100%;
  }
  
  /* Fix dialog/modal width on mobile */
  [data-slot="dialog-content"] {
    max-width: calc(100vw - 2rem) !important;
    margin: 1rem;
  }
}

/* ============================================ */
/* JIVO CHAT WIDGET - Mobile Positioning */
/* ============================================ */
@media (max-width: 768px) {
  /* Move JivoSite chat button above bottom nav (approx 70px height) */
  jdiv[class*="wrap"],
  jdiv[class*="button"],
  #jivo-iframe-container,
  .__jivoMobileButton {
    bottom: 80px !important;
  }
}
